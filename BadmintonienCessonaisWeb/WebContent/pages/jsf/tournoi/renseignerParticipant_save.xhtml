<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
		xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:p="http://primefaces.org/ui"
		template="/WEB-INF/templates/disposition.xhtml"
		xmlns:tag="http://taglibs/customtags">
		
		<ui:define name="pageHeader">
			Création tournoi / Renseigner des participants
		</ui:define>
		
		<ui:define name="body">
			
			<p:commandButton value="Tournoi" onclick="createTournoi.show()"/>
			
			<p:dialog header="Création du Tournoi" widgetVar="createTournoi" resizable="false" modal="true"> 
				<h:form id="formulaireCreateTournoi">
					<h:panelGrid columns="2">
						<tag:input-zone for="inputNomTournoi" label="Nom du tournoi">
							<p:inputText id="inputNomTournoi" placeholder="Nom" value="#{creationTournoiBean.tournoi.nom}"/>
						</tag:input-zone>
						<tag:input-zone for="inputDateTournoi" label="Date">
							<p:calendar id="inputDateTournoi" placeholder="jj/mm/aaaa" value="#{creationTournoiBean.tournoi.dateTournoi}" required="true"/>
						</tag:input-zone>
						<tag:input-zone for="inputLieuTournoi" label="Lieu">
							<p:inputText id="inputLieuTournoi" placeholder="Lieu" value="#{creationTournoiBean.tournoi.lieu}" required="true"/>
						</tag:input-zone>
						<tag:input-zone for="inputDureeTournoi" label="Durée d'un match">
							<p:inputText id="inputDureeTournoi" placeholder="Durée moyenne" value="#{creationTournoiBean.tournoi.dureeMatch}" required="true"/>
						</tag:input-zone>
						<tag:input-zone for="inputRecupTournoi" label="Temps de récupération">
							<p:inputText id="inputRecupTournoi" placeholder="Récupération minimum" value="#{creationTournoiBean.tournoi.dureeRecup}" required="true"/>
						</tag:input-zone>
						<tag:input-zone for="inputNbTerrainTournoi" label="Nombre de terrains disponible">
							<p:inputText id="inputNbTerrainTournoi" placeholder="Nombre de terrains" value="#{creationTournoiBean.tournoi.nbTerrain}" required="true"/>
						</tag:input-zone>
					</h:panelGrid>
					<p:commandButton update="@form" value="Valider" actionListener="#{creationTournoiBean.flashTournoi()}"/>
				</h:form>
			</p:dialog>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
			<p:dialog header="Création un tableau" widgetVar="createTab" resizable="false" modal="true"> 
				<h:form id="formulaireTableau">
					<h:panelGrid columns="4" style="margin-bottom:10px">
						<tag:input-zone for="selectFormat" label="Format">
							<p:selectOneMenu id="selectFormat" value="#{creationTournoiBean.tableau.format}" converter="#{genericConvertor}">
								<f:selectItems value="#{creationTournoiBean.formats}" var="format" itemLabel="#{format.libelle}"/>
							</p:selectOneMenu>
						</tag:input-zone>
						
						<tag:input-zone for="inputPax" label="Nombre de PAX/Poule">
							<p:inputText id="inputPax" value="#{creationTournoiBean.tableau.nbPax}" maxlength="2" size="2"/>
						</tag:input-zone>
						
						<tag:input-zone for="selectCategorie" label="Catégorie(s)">
							<p:selectManyMenu id="selectCategorie" value="#{creationTournoiBean.tableau.categories}" converter="#{genericConvertor}" styleClass="manySelect">
								<f:selectItems value="#{creationTournoiBean.categories}" var="cat" itemLabel="#{cat.libelle}"/>
							</p:selectManyMenu>
						</tag:input-zone>
						
						<tag:input-zone for="selectClassement" label="Classement(s)">
							<p:selectManyMenu id="selectClassement" value="#{creationTournoiBean.tableau.classements}" converter="#{genericConvertor}" styleClass="manySelect">
								<f:selectItems value="#{creationTournoiBean.classements}" var="class" itemLabel="#{class}"/>
							</p:selectManyMenu>
						</tag:input-zone>
					</h:panelGrid>
					<p:commandButton value="Ajouter" update="@form :formulaireTableauVisu" actionListener="#{creationTournoiBean.ajouterTableau()}"></p:commandButton>
				</h:form>
				<h:form id="formulaireTableauVisu">
						<p:dataTable var="tab" value="#{creationTournoiBean.tournoi.tableaux}" emptyMessage="Aucun tableau n'est créé">  
						        <p:column headerText="Ident">  
						            <h:outputText value="#{tab.numTab}" />  
						        </p:column>  
						        <p:column headerText="Format">  
						            <h:outputText value="#{tab.format.libelle}" />  
						        </p:column>  
						        <p:column headerText="Classement">  
						            <h:outputText value="#{tab.classements}" />  
						        </p:column>  
						        <p:column headerText="Catégorie">  
						            <h:outputText value="#{tab.categories}" />  
						        </p:column> 
						        <p:column headerText="Nb de PAX/Poule ">  
						            <h:outputText value="#{tab.nbPax}" />  
						        </p:column> 
						 </p:dataTable>
				</h:form>
				<f:facet name="footer">
					<h:form>
						<p:commandButton value="Valider" update=":formRecap" onclick="createTab.hide()"/>
					</h:form>
				</f:facet>
			</p:dialog>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<h:form id="formRecap">
				<p:panelGrid columns="2" id="panelRecap">
						<p:panel>
							<f:facet name="header">
								Tournoi #{creationTournoiBean.tournoi.nom}
							</f:facet>
							<p:panelGrid columns="2">
								<p:outputLabel>Date</p:outputLabel><p:outputLabel>#{creationTournoiBean.tournoi.dateTournoi}</p:outputLabel>
								<p:outputLabel>Lieu</p:outputLabel><p:outputLabel>#{creationTournoiBean.tournoi.lieu}</p:outputLabel>
								<p:outputLabel>Nb Terrains disponibles</p:outputLabel><p:outputLabel>#{creationTournoiBean.tournoi.nbTerrain}</p:outputLabel>
								<p:outputLabel>Durée d'un match</p:outputLabel><p:outputLabel>#{creationTournoiBean.tournoi.dureeMatch}</p:outputLabel>
								<p:outputLabel>Tps de récupération</p:outputLabel><p:outputLabel>#{creationTournoiBean.tournoi.dureeRecup}</p:outputLabel>
							</p:panelGrid>
						</p:panel>
						<p:panel id="panelTableau">
							<f:facet name="header">
								Tableau
								<p:selectOneMenu id="selectTableau" value="#{creationTournoiBean.tableau}" converter="#{genericConvertor}">
									<f:selectItems value="#{creationTournoiBean.tournoi.tableaux}" var="tab" itemLabel="#{tab.numTab}"/>
								</p:selectOneMenu>
								<p:commandButton id="btnUpdateTab" type="button" value="majTabSelect" update="@form"/>
								<p:commandButton id="showDialogButtonCreateTab" value="+" actionListener="#{creationTournoiBean.initAjoutTableau()}" onclick="createTab.show()"/>
							</f:facet>
							<p:panelGrid columns="2">
								<p:outputLabel>Format</p:outputLabel><p:outputLabel>#{creationTournoiBean.tableau.format.libelle}</p:outputLabel>
								<p:outputLabel>Classement</p:outputLabel><p:outputLabel>#{creationTournoiBean.tableau.classements}</p:outputLabel>
								<p:outputLabel>Catégories</p:outputLabel><p:outputLabel>#{creationTournoiBean.tableau.categories}</p:outputLabel>
								<p:outputLabel>Nb de participants/Poule</p:outputLabel><p:outputLabel>#{creationTournoiBean.tableau.nbPax}</p:outputLabel>
							</p:panelGrid>
						</p:panel>
				</p:panelGrid>
			</h:form>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
		</ui:define>
		
</ui:composition>
